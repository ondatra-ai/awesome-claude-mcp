# <!-- Powered by BMAD™ Core -->
# Story 1.2: Project Repository Setup

## Status
Draft

## Story
**As a** Developer/Maintainer,
**I want** to initialize the Go project structure,
**so that** I have a maintainable codebase foundation

## Acceptance Criteria
1. Go module initialized with dependencies
2. Project structure follows architecture document  
3. Makefile created with build, test, deploy targets
4. Git repository configured with .gitignore
5. README.md with setup instructions
6. MIT license file added

## Tasks / Subtasks
- [ ] Task 1: Initialize Go module and dependencies (AC: 1)
  - [ ] Create backend/go.mod with module name `mcp-google-docs-editor`
  - [ ] Add core Go dependencies: gin, zerolog, viper, testify, gomock, golangci-lint
  - [ ] Add MCP and Google API dependencies: mcp-go, golang.org/x/oauth2, google.golang.org/api/docs/v1
  - [ ] Add caching and middleware dependencies: go-redis/redis, goldmark
  - [ ] Run `go mod tidy` to create go.sum lockfile
  
- [ ] Task 2: Create complete project directory structure (AC: 2)
  - [ ] Create frontend/ directory with Next.js structure
  - [ ] Create backend/ directory with Go service structure
  - [ ] Create infrastructure/ directory with Terraform structure
  - [ ] Create .github/workflows/ directory for CI/CD
  - [ ] Create scripts/ directory for build and deploy scripts
  - [ ] Create docs/stories/ and docs/architecture/ directories if missing
  
- [ ] Task 3: Create Makefile with build, test, deploy targets (AC: 3)
  - [ ] Add `build` target for Go backend compilation
  - [ ] Add `test` target for running Go tests with coverage
  - [ ] Add `deploy` target for AWS deployment
  - [ ] Add `lint` target for golangci-lint
  - [ ] Add `docker-build` target for container builds
  - [ ] Add `dev` target for local development setup

- [ ] Task 4: Configure Git repository with proper .gitignore (AC: 4)
  - [ ] Update existing .gitignore with Go-specific patterns
  - [ ] Add Node.js and Next.js ignore patterns
  - [ ] Add environment files (.env*) to gitignore
  - [ ] Add build artifacts and dependency directories
  - [ ] Add AWS and Terraform state file patterns

- [ ] Task 5: Create comprehensive README.md with setup instructions (AC: 5)
  - [ ] Add project description and architecture overview
  - [ ] Add prerequisites (Go 1.21.5, Node.js, Docker, AWS CLI)
  - [ ] Add local development setup instructions
  - [ ] Add build and deployment instructions
  - [ ] Add testing and contribution guidelines

- [ ] Task 6: Ensure MIT license file is properly configured (AC: 6)
  - [ ] Verify existing LICENSE file contains MIT license text
  - [ ] Update copyright year to 2025 if needed
  - [ ] Ensure license references the correct project name

- [ ] Task 7: Create initial configuration files
  - [ ] Create docker-compose.yml for local development

## Dev Notes

### Previous Story Insights
No previous story exists - this is the first story in Epic 1.

### Tech Stack Requirements
**Go Backend (Primary Language):**
- **Language**: Go 1.21.5 [Source: architecture.md#Backend Technologies]
- **Web Framework**: Gin 1.9.1 for HTTP routing and middleware [Source: architecture.md#Backend Technologies]
- **MCP Library**: mcp-go 0.1.0 for MCP protocol implementation [Source: architecture.md#Backend Technologies]
- **OAuth Library**: golang.org/x/oauth2 0.15.0 for Google OAuth [Source: architecture.md#Infrastructure Technologies]
- **Google API Client**: google.golang.org/api/docs/v1 0.150.0 [Source: architecture.md#Infrastructure Technologies]
- **Markdown Parser**: goldmark 1.6.0 for Markdown to AST conversion [Source: architecture.md#Infrastructure Technologies]
- **Redis Client**: go-redis/redis 9.3.0 for caching [Source: architecture.md#Infrastructure Technologies]
- **Logger**: zerolog 1.31.0 for structured JSON logging [Source: architecture.md#Infrastructure Technologies]
- **Config Management**: viper 1.17.0 for configuration [Source: architecture.md#Infrastructure Technologies]
- **Testing**: testify 1.8.4 for test assertions and mocks [Source: architecture.md#Infrastructure Technologies]
- **Mocking**: gomock 1.6.0 for interface mocking [Source: architecture.md#Infrastructure Technologies]
- **Linter**: golangci-lint 1.55.0 for code quality [Source: architecture.md#Infrastructure Technologies]

**Frontend Technologies:**
- **Framework**: Next.js 14.1.0 with App Router [Source: architecture.md#Frontend Technologies]
- **Language**: TypeScript 5.3.3 for type safety [Source: architecture.md#Frontend Technologies]
- **UI Library**: React 18.2.0 [Source: architecture.md#Frontend Technologies]
- **Styling**: Tailwind CSS 3.4.0 [Source: architecture.md#Frontend Technologies]
- **Components**: shadcn/ui for pre-built components [Source: architecture.md#Frontend Technologies]

**Infrastructure:**
- **Container Platform**: Docker 24.0.0 [Source: architecture.md#Backend Technologies]
- **Base Image**: golang:1.21-alpine [Source: architecture.md#Backend Technologies]
- **Cloud Provider**: AWS (ECS Fargate, ElastiCache Redis, RDS PostgreSQL) [Source: architecture.md#Infrastructure Technologies]

### Project Structure Specification
Complete source tree structure must match the architecture specification [Source: architecture.md#Source Tree]:

```plaintext
mcp-google-docs-editor/
├── frontend/                       # Next.js Frontend Application
│   ├── app/                        # App Router directory
│   ├── components/                 # React Components
│   ├── lib/                        # Utility functions
│   ├── public/                     # Static assets
│   ├── package.json                # Frontend dependencies
│   ├── tsconfig.json               # TypeScript config
│   ├── next.config.js              # Next.js config
│   ├── tailwind.config.ts          # Tailwind config
│   ├── Dockerfile                  # Frontend container definition
│   └── .env.local                  # Frontend env vars
├── backend/                        # Go Backend Services
│   ├── cmd/                        # Application entry points
│   │   ├── api/main.go             # API server entry point
│   │   └── mcp/main.go             # MCP server entry point
│   ├── internal/                   # Internal packages
│   │   ├── api/                    # HTTP handlers and routes
│   │   ├── mcp/                    # MCP protocol implementation
│   │   ├── auth/                   # OAuth and authentication
│   │   ├── operations/             # Document operations
│   │   ├── docs/                   # Google Docs integration
│   │   ├── cache/                  # Redis caching
│   │   └── config/                 # Configuration
│   ├── pkg/                        # Public packages
│   ├── deployments/                # Dockerfiles
│   ├── go.mod                      # Go dependencies
│   └── go.sum                      # Dependency lock
├── infrastructure/                 # Infrastructure as Code
│   ├── terraform/                  # Terraform configurations
│   └── docker/                     # Docker deployment notes
├── .github/workflows/              # GitHub Actions CI/CD
├── scripts/                        # Build and deploy scripts
├── docs/                           # Documentation
├── docker-compose.yml              # Local development stack
├── .gitignore                      # Git ignore rules
└── README.md                       # Project documentation
```

### File Locations for New Code
Based on the project structure, new files should be created in specific locations:
- **Go Main Applications**: `backend/cmd/{api,mcp}/main.go` [Source: architecture.md#Source Tree]
- **Go Business Logic**: `backend/internal/{api,mcp,auth,operations,docs,cache,config}/` [Source: architecture.md#Source Tree]
- **Go Public Packages**: `backend/pkg/{errors,utils}/` [Source: architecture.md#Source Tree]
- **Docker Configurations**: `backend/deployments/{api,mcp}/Dockerfile` [Source: architecture.md#Source Tree]
- **Infrastructure Code**: `infrastructure/terraform/` [Source: architecture.md#Source Tree]
- **CI/CD Pipelines**: `.github/workflows/` [Source: architecture.md#Source Tree]

### Technical Constraints
**Go Module Requirements:**
- **Module Name**: Must be `mcp-google-docs-editor` or similar 
- **Go Version**: Minimum Go 1.21.5 [Source: architecture.md#Backend Technologies]
- **Dependencies**: All versions must match architecture specification exactly

**Repository Configuration:**
- **Monorepo Structure**: Single repository containing both frontend and backend [Source: architecture.md#High Level Overview]
- **Container Strategy**: Each service has its own Dockerfile [Source: architecture.md#Source Tree]
- **Development Environment**: Docker Compose for local development [Source: architecture.md#Source Tree]

### Testing

#### Testing Framework and Standards
- **Framework**: Go standard testing package [Source: architecture.md#Unit Tests]
- **File Convention**: `{filename}_test.go` in same directory [Source: architecture.md#Unit Tests]
- **Location**: Alongside implementation files [Source: architecture.md#Unit Tests]
- **Mocking Library**: gomock for interfaces [Source: architecture.md#Unit Tests]
- **Coverage Requirement**: 85% for business logic, minimum 80% overall [Source: architecture.md#Unit Tests]

#### Test Organization
- **Unit Tests**: 60% of test pyramid - test individual functions and methods [Source: architecture.md#Testing Philosophy]
- **Integration Tests**: 30% of test pyramid - located in `tests/integration/` [Source: architecture.md#Integration Tests]
- **End-to-End Tests**: 10% of test pyramid - full workflow testing [Source: architecture.md#Testing Philosophy]

#### Testing Infrastructure
- **Redis Testing**: miniredis for in-memory testing [Source: architecture.md#Integration Tests]
- **Test Data**: Fixtures in `tests/fixtures/` directory [Source: architecture.md#Test Data Management]
- **Test Environment**: Docker Compose with all services [Source: architecture.md#End-to-End Tests]

#### AI Agent Testing Requirements
- Generate tests for all public methods [Source: architecture.md#Unit Tests]
- Cover edge cases and error conditions [Source: architecture.md#Unit Tests]
- Follow AAA pattern (Arrange, Act, Assert) [Source: architecture.md#Unit Tests]
- Mock all external dependencies [Source: architecture.md#Unit Tests]

### Project Structure Notes
Current project structure lacks the main application directories (frontend/, backend/, infrastructure/). This story establishes the complete foundation structure as defined in the architecture document. No structural conflicts identified - this is intentional scaffolding work.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-07 | 1.0.0 | Initial story creation for Epic 1.2 | Claude (AI Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be added here*